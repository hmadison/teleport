---
title: Machine ID CLI Reference
description: CLI reference for Teleport Machine ID.
---

# Machine ID CLI Reference

## `tbot start`

Starts the Machine ID client `tbot`, fetching and writing certificates to disk
at a set interval.

<Details scope={["cloud"]} scopeOnly={true}>
```code
$ tbot start \
   --data-dir=/var/lib/teleport/bot \
   --destination-dir=/opt/machine-id \
   --token=00000000000000000000000000000000 \
   --join-method=token \
   --ca-pin=sha256:1111111111111111111111111111111111111111111111111111111111111111 \
   --auth-server=example.teleport.sh:443
```
</Details>
<Details scope={["oss","enterprise"]} scopeOnly={true}>
```code
$ tbot start \
   --data-dir=/var/lib/teleport/bot \
   --destination-dir=/opt/machine-id \
   --token=00000000000000000000000000000000 \
   --join-method=token \
   --ca-pin=sha256:1111111111111111111111111111111111111111111111111111111111111111 \
   --auth-server=auth.example.com:3025
```
</Details>

| Flag                 | Description                                                                                    |
|----------------------|------------------------------------------------------------------------------------------------|
| `-d/--debug`         | Enable verbose logging to stderr.                                                              |
| `-c/--config`        | Path to a configuration file. Defaults to `/etc/tbot.yaml` if unspecified.                     |
| `-a/--auth-server`   | Address of the Teleport Auth Server (On-Prem installs) or Proxy Server (Cloud installs).       |
| `--token`            | A bot join token, if attempting to onboard a new bot; used on first connect.                   |
| `--ca-pin`           | CA pin to validate the auth server.                                                            |
| `--data-dir`         | Directory to store internal bot data. Access should be limited. See `tbot init` for details.   |
| `--destination-dir`  | Directory to write short-lived machine certificates.                                           |
| `--certificate-ttl`  | TTL of short-lived machine certificates.                                                       |
| `--renewal-interval` | Interval at which short-lived certificates are renewed; must be less than the certificate TTL. |
| `--join-method`      | Method to use to join the cluster, can be `token` or `iam`.                                    |
| `--one-shot`         | If set, quit after the first renewal.                                                          |

## `tbot init`

Initialize a certificate destination directory for writes from a separate bot
user. Useful when running the bot under an isolated user account.

```code
$ tbot init \
    --destination-dir=/opt/machine-id \
    --bot-user=ubuntu \
    --owner=ubuntu:ubuntu \
    --reader-user=jenkins
```

| Flag                 | Description                                                                                           |
|----------------------|-------------------------------------------------------------------------------------------------------|
| `-d/--debug`         | Enable verbose logging to stderr.                                                                     |
| `-c/--config`        | Path to a configuration file. Defaults to `/etc/tbot.yaml` if unspecified.                            |
| `--destination-dir`  | Directory to write short-lived machine certificates to.                                               |
| `--owner`            | Defines Linux user:group owner of `--destination-dir`. Defaults to `nobody:nobody` if unspecified.    |
| `--bot-user`         | When using ACLs, defines Linux user that can write short-lived certificates to `--destination-dir`.   |
| `--reader-user`      | When using ACLs, defines Linux user that will read short-lived certificates from `--destination-dir`. |
| `--init-dir`         | If using a config file and multiple destinations are configured, specify which to initialize.         |
| `--clean`            | If set, remove unexpected files and directories from the destination.                                 |
